#!/usr/bin/env python3
#######################################################################################################
#	Dispatcher for the event in the App																						#
#	Do all the events stuff																										#
#	Creator:		Yves Huguenin																									#
#	Date:			28.10.2019																										#
#	Version:		0.1																												#
#																																		#
#######################################################################################################


class dispatcher:
####################################################################################################
#																																	#
#																																	#
####################################################################################################

	def __init__(self, theWin, theGest):
		self.win		= theWin
		self.app		= theGest.app
		self.Main		= theGest

		
####################################################################################################
#																																	#
#																																	#
####################################################################################################

	def dateDecompte(self):
		None
		
####################################################################################################
#																																	#
#																																	#
####################################################################################################

	def dateTransaction(self):
		None
		
####################################################################################################
#																																	#
#																																	#
####################################################################################################

	def createExcel(self):
		None
		
####################################################################################################
#																																	#
#																																	#
####################################################################################################

	def createPdf(self):
		None
		
####################################################################################################
#																																	#
#																																	#
####################################################################################################

	def  setCards(self,  theCards):
		None
		
####################################################################################################
#																																	#
#																																	#
####################################################################################################

	def updateTank( self,  ip, id, level, capacity, high ):
		print("Callback called")
		try:
			if self.win.cSerial.findText(id.decode("utf-8")) == -1:
				self.win.cSerial.addItem( id.decode() )
			tLevel	= int( level )
			tFull		= int( capacity, 16)
			tHeight	= int( high, 16)
			self.win.cPercent.setValue( tLevel / tFull )
			self.win.cCapacity.setText("{}".format(tLevel/100))
			self.win.cFull.setText("{}".format(tFull))
			self.win.cHeight.setText("{}".format(tHeight))

		except Exception as inst:
			print(inst) 	
####################################################################################################
#																																	#
#																																	#
####################################################################################################

	def  setAbout(self,  theAbout):
		self.about	= theAbout
		
####################################################################################################
#																																	#
#																																	#
####################################################################################################

	def doAbout(self):
		self.about.setModal( True )
		self.about.show()
		
####################################################################################################
#																																	#
#																																	#
####################################################################################################

	def resizeWindow(self):
		win	= self.win
		size	= win.size()
		msize	= 20
		tsize	= msize + 20
		vsize	= tsize + 20
		hsize	= 20

		
####################################################################################################
#																																	#
#																																	#
####################################################################################################

	def doPreferences(self):
		
		ret =	self.Main.thePref.showDialog()
		if ret == 1:
			None
